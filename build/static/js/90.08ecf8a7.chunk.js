"use strict";(self.webpackChunktravex=self.webpackChunktravex||[]).push([[90],{3131:function(e,t,r){r.d(t,{_N:function(){return o},x9:function(){return s}});var n=r(9085),a={autoClose:2e3,className:"",position:n.Am.POSITION.TOP_RIGHT},s=function(e){n.Am.success(e,a)},o=function(e){n.Am.error(e,a)}},126:function(e,t){t.Z=Object.freeze({LOGIN:"/api/login",CREATE_USER:"/api/register",CREATE_BUSINESS:"/api/business/register",PROFILE:"/api/profile",USERS:"/api/masteradmin/users",LOCATION:function(e){return"/api/locations/".concat(e)},MASTER_LOCATIONS:"/api/admin/locations",CREATE_LOCATION_BY_MASTER_ADMIN:"/api/masteradmin/locations",MY_LOCATION:"/api/profile/locations",APPROVE_LOCATION:function(e){return"/api/locations/".concat(e,"/approve")},ADD_REVIEW:function(e){return"/api/locations/".concat(e,"/reviews")},APPROVE_REVIEW:function(e){return"/api/locations/".concat(e,"/reviews/approveReview")},ADD_REPLY:function(e){return"/api/locations/".concat(e,"/reviews/addComment")},APPROVE_REPLY:function(e){return"/api/locations/".concat(e,"/comments/approveReply")}})},1090:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});r(2791);var n=r(176),a=r(6146),s=r(7908),o=r(4925),i=r(3418),c=r(8669),u=r(126),d=r(3131),l=r(1986),p=["mutate"],m=function(e){return c.Z.post(u.Z.LOGIN,e)};var h=r(5705),f=r(1724),g=f.Ry().shape({email:f.Z_("Enter your email").required("Email is required").email("Enter a valid email address"),password:f.Z_("Enter your password").required("Password is required").min(3,"Password must be at least 3 characters").max(256,"Password must not exceed 256 characters")}),v=r(7689),x=r(184);var w=function(){var e=(0,v.s0)(),t=function(){var e=(0,i.D)(m),t=e.mutate;return{login:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t(e,{onSuccess:function(e){(0,l.E8)(e.data.accessToken),r(e)},onError:function(e){(0,d._N)(e.message)}})},loginState:(0,o.Z)(e,p)}}(),r=t.login,c=t.loginState,u=(0,l.z1)(),f=(0,h.TA)({initialValues:{email:"",password:""},validationSchema:g,onSubmit:function(t){r(t,(function(t){u?(e(u),(0,l.Gk)()):"master_admin"===t.data.user.Role?e("/dashboard"):"admin"===t.data.user.Role?e("/my-listings"):e("/")}))}});return(0,x.jsx)(n.k,{height:"100%",width:"100%",alignItems:"center",justifyContent:"center",bg:"gray.200",p:"20px",children:(0,x.jsxs)(n.k,{flexDirection:"column",alignItems:"center",justifyContent:"center",bg:"white",py:"60px",px:{base:"30px",sm:"40px",md:"60px"},borderRadius:"24px",maxWidth:"600px",width:"100%",children:[(0,x.jsx)(s.ZT,{textStyle:"7",fontWeight:700,mb:{base:"30px",sm:"40px",md:"60px"},children:"Log In"}),(0,x.jsx)("form",{onSubmit:function(e){e.preventDefault(),f.handleSubmit(e)},id:"login",style:{width:"100%"},children:(0,x.jsxs)(a.g,{spacing:"20px",width:"100%",children:[(0,x.jsx)(s.II,{id:"email",variant:"outline",placeholder:"Email Address",type:"email",value:f.values.email,onChange:f.handleChange,onBlur:f.handleBlur,isInvalid:f.touched.email&&Boolean(f.errors.email),errorMsg:f.errors.email}),(0,x.jsx)(s.II,{id:"password",variant:"outline",placeholder:"Your Password",type:"password",value:f.values.password,onChange:f.handleChange,onBlur:f.handleBlur,isInvalid:f.touched.password&&Boolean(f.errors.password),errorMsg:f.errors.password}),(0,x.jsx)(s.zx,{width:"100%",variant:"solid",mode:"secondary",type:"submit",isDisabled:c.isLoading||0!==Object.keys(f.errors).length,isLoading:c.isLoading,children:"Login"}),(0,x.jsx)(s.rU,{fontWeight:500,href:"/register",children:"Not A member? Create Account"})]})})]})})}},8669:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(3263),a=r(691),s=r.n(a),o=r(1986),i=n.Z.create({baseURL:"https://www.travexapitest.co.uk"});function c(e){return e.results?Promise.resolve(e.results):e.data?Promise.resolve(e.data):Promise.resolve(e)}i.interceptors.request.use((function(e){var t=(0,o.bW)();return t&&!e.headers.hasOwnProperty("Authorization")&&(e.headers.Authorization="Bearer ".concat(t)),e})),i.interceptors.request.use((function(e){return s().start(),e})),i.interceptors.response.use((function(e){return s().done(),e}),(function(e){if(s().done(),e.response&&e.response.data&&e.response.data.message)if(401===e.response.status)e={response:{data:e.response.data}},(0,o.H6)();else if(404===e.response.status)e={response:{data:e.response.data}};else{if(500!==e.response.status)return Promise.reject(e);e={response:{data:{message:"Ooops! an error occurred"}}}}else e={response:{data:{message:"Unable to complete request"}}};throw e}));function u(e){return e.data?Promise.reject(e.data):e.response.data?Promise.reject(e.response.data):Promise.reject(e)}var d={get:function(e){return i.get(e).then(c).catch(u)},post:function(e,t,r){return i.post(e,t,r).then(c).catch(u)},put:function(e,t){return i.put(e,t).then(c).catch(u)},patch:function(e,t){return i.patch(e,t).then(c).catch(u)},remove:function(e,t){return i.delete(e,t).then(c).catch(u)}}}}]);
//# sourceMappingURL=90.08ecf8a7.chunk.js.map