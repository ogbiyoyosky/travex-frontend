{"version":3,"file":"static/js/90.08ecf8a7.chunk.js","mappings":"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","sources":["components/Toast.js","constants/endpoints.js","hooks/mutations/useLogin.js","schema/login.schema.js","screens/Login.jsx","config/axiosConfig.js","services/response.js","services/api.js"],"sourcesContent":["import { toast } from 'react-toastify';\n\nconst options = {\n  autoClose: 2000,\n  className: '',\n  position: toast.POSITION.TOP_RIGHT\n};\n\nexport const toastSuccess = message => {\n  toast.success(message, options);\n};\n\nexport const toastError = message => {\n  toast.error(message, options);\n};\n\nexport const toastWarning = message => {\n  toast.warn(message, options);\n};\n\nexport const toastInformation = message => {\n  toast.info(message, options);\n};\n\nexport const toastDark = message => {\n  toast.dark(message, options);\n};\n\nexport const toastDefault = message => {\n  toast(message, options);\n};\n","export default Object.freeze({\n  LOGIN: `/api/login`,\n  CREATE_USER: '/api/register',\n  CREATE_BUSINESS: '/api/business/register',\n  PROFILE: `/api/profile`,\n  USERS: `/api/masteradmin/users`,\n  LOCATION: (id) => `/api/locations/${id}`,\n  MASTER_LOCATIONS: `/api/admin/locations`,\n  CREATE_LOCATION_BY_MASTER_ADMIN: `/api/masteradmin/locations`,\n  MY_LOCATION: `/api/profile/locations`,\n  APPROVE_LOCATION: (id) => `/api/locations/${id}/approve`,\n  ADD_REVIEW: (id) => `/api/locations/${id}/reviews`,\n  APPROVE_REVIEW: (id) => `/api/locations/${id}/reviews/approveReview`,\n  ADD_REPLY: (id) => `/api/locations/${id}/reviews/addComment`,\n  APPROVE_REPLY: (id) => `/api/locations/${id}/comments/approveReply`,\n});\n","import { useMutation } from '@tanstack/react-query';\nimport api from 'services/api';\nimport e from 'constants/endpoints';\nimport { toastError } from 'components/Toast';\nimport { storeAuthToken } from 'utils/auth';\n\n/**\n * Endpoint to login\n *\n * @param {object} body\n *\n * @returns {Promise<{ message: string }>}\n */\nconst loginRequest = (payload) => api.post(e.LOGIN, payload);\n\nexport default function useLogin() {\n  const { mutate, ...mutationState } = useMutation(loginRequest);\n\n  const login = (payload, onSuccess = () => {}) => {\n    mutate(payload, {\n      onSuccess: (data) => {\n        storeAuthToken(data.data.accessToken);\n        onSuccess(data);\n      },\n      onError: (error) => {\n        toastError(error.message);\n      },\n    });\n  };\n\n  return { login, loginState: mutationState };\n}\n","import * as Yup from 'yup';\n\nconst LoginSchema = Yup.object().shape({\n  email: Yup.string('Enter your email')\n    .required('Email is required')\n    .email('Enter a valid email address'),\n  password: Yup.string('Enter your password')\n    .required('Password is required')\n    .min(3, 'Password must be at least 3 characters')\n    .max(256, 'Password must not exceed 256 characters'),\n});\n\nexport default LoginSchema;\n","import React from 'react';\nimport { Flex, VStack } from '@chakra-ui/react';\nimport { Button, Input, Link, Typography } from 'components';\nimport useLogin from 'hooks/mutations/useLogin';\nimport { useFormik } from 'formik';\nimport LoginSchema from 'schema/login.schema';\nimport { useNavigate } from 'react-router-dom';\nimport { getPreviousRoute, removePreviousRoute } from 'utils/auth';\n\nfunction Login() {\n  const navigate = useNavigate();\n  const { login, loginState } = useLogin();\n  const previousRoute = getPreviousRoute();\n\n  const formik = useFormik({\n    initialValues: {\n      email: '',\n      password: '',\n    },\n    validationSchema: LoginSchema,\n    onSubmit: (payload) => {\n      login(payload, (data) => {\n        if (previousRoute) {\n          navigate(previousRoute);\n          removePreviousRoute();\n        } else {\n          if (data.data.user.Role === 'master_admin') {\n            navigate('/dashboard');\n          } else if (data.data.user.Role === 'admin') {\n            navigate('/my-listings');\n          } else {\n            navigate('/');\n          }\n        }\n      });\n    },\n  });\n\n  return (\n    <Flex\n      height=\"100%\"\n      width=\"100%\"\n      alignItems=\"center\"\n      justifyContent=\"center\"\n      bg=\"gray.200\"\n      p=\"20px\"\n    >\n      <Flex\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        bg=\"white\"\n        py=\"60px\"\n        px={{ base: '30px', sm: '40px', md: '60px' }}\n        borderRadius=\"24px\"\n        maxWidth=\"600px\"\n        width=\"100%\"\n      >\n        <Typography textStyle=\"7\" fontWeight={700} mb={{ base: '30px', sm: '40px', md: '60px' }}>\n          Log In\n        </Typography>\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            formik.handleSubmit(e);\n          }}\n          id=\"login\"\n          style={{ width: '100%' }}\n        >\n          <VStack spacing={'20px'} width=\"100%\">\n            <Input\n              id=\"email\"\n              variant=\"outline\"\n              placeholder=\"Email Address\"\n              type=\"email\"\n              value={formik.values.email}\n              onChange={formik.handleChange}\n              onBlur={formik.handleBlur}\n              isInvalid={formik.touched.email && Boolean(formik.errors.email)}\n              errorMsg={formik.errors.email}\n            />\n            <Input\n              id=\"password\"\n              variant=\"outline\"\n              placeholder=\"Your Password\"\n              type=\"password\"\n              value={formik.values.password}\n              onChange={formik.handleChange}\n              onBlur={formik.handleBlur}\n              isInvalid={formik.touched.password && Boolean(formik.errors.password)}\n              errorMsg={formik.errors.password}\n            />\n            <Button\n              width=\"100%\"\n              variant=\"solid\"\n              mode=\"secondary\"\n              type=\"submit\"\n              isDisabled={loginState.isLoading || Object.keys(formik.errors).length !== 0}\n              isLoading={loginState.isLoading}\n            >\n              Login\n            </Button>\n            <Link fontWeight={500} href=\"/register\">\n              Not A member? Create Account\n            </Link>\n          </VStack>\n        </form>\n      </Flex>\n    </Flex>\n  );\n}\nexport default Login;\n","import axios from 'axios';\nimport Nprogress from 'nprogress';\nimport { getAuthToken, removeAuthToken } from 'utils/auth';\n\n// create a new axios instance\nexport const instance = axios.create({\n  // eslint-disable-next-line no-undef\n  baseURL: process.env.REACT_APP_API_URL,\n});\n\ninstance.interceptors.request.use((config) => {\n  const token = getAuthToken();\n\n  // eslint-disable-next-line no-prototype-builtins\n  if (token && !config.headers.hasOwnProperty('Authorization')) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  return config;\n});\n\ninstance.interceptors.request.use((config) => {\n  Nprogress.start();\n\n  return config;\n});\n\ninstance.interceptors.response.use(\n  function (response) {\n    Nprogress.done();\n    return response;\n  },\n  function (error) {\n    Nprogress.done();\n    if (!error.response || !error.response.data || !error.response.data.message) {\n      error = {\n        response: {\n          data: {\n            message: 'Unable to complete request',\n          },\n        },\n      };\n    } else if (401 === error.response.status) {\n      error = {\n        response: {\n          data: error.response.data,\n        },\n      };\n      removeAuthToken();\n    } else if (404 === error.response.status) {\n      error = {\n        response: {\n          data: error.response.data,\n        },\n      };\n    } else if (500 === error.response.status) {\n      error = {\n        response: {\n          data: {\n            message: 'Ooops! an error occurred',\n          },\n        },\n      };\n    } else {\n      return Promise.reject(error);\n    }\n    throw error;\n  }\n);\n","export function handleResponse(response) {\n  if (response.results) {\n    return Promise.resolve(response.results);\n  }\n\n  if (response.data) {\n    return Promise.resolve(response.data);\n  }\n\n  return Promise.resolve(response);\n}\n\nconst handleErrorResponse = (response) => {\n  const {\n    data: { message, errors },\n  } = response;\n\n  if (message === \"Invalid Data\") {\n    throw new Error(errors[0].message);\n  }\n\n  throw new Error(message);\n};\n\nexport const handleRequestResponse = async (callback) => {\n  try {\n    const response = await callback();\n    return response.data;\n  } catch (error) {\n    if (error.response) {\n      if (error.response.status === 401) {\n        window.location.replace(\"/login\");\n      }\n      throw handleErrorResponse(error.response);\n    }\n    throw error;\n  }\n};\n\nexport function handleError(error) {\n  if (error.data) {\n    return Promise.reject(error.data);\n  }\n\n  if (error.response.data) {\n    return Promise.reject(error.response.data);\n  }\n  return Promise.reject(error);\n}\n","import { instance as axios } from 'config/axiosConfig';\nimport { handleResponse, handleError } from './response';\n\n/** @param {string} resource */\nconst get = resource => {\n  return axios.get(resource).then(handleResponse).catch(handleError);\n};\n\n/** @param {string} resource */\n/** @param {object} model */\n/** @param {object} options */\nconst post = (resource, model, options) => {\n  return axios.post(resource, model, options).then(handleResponse).catch(handleError);\n};\n\n/** @param {string} resource */\n/** @param {object} model */\nconst put = (resource, model) => {\n  return axios.put(resource, model).then(handleResponse).catch(handleError);\n};\n\n/** @param {string} resource */\n/** @param {object} model */\nconst patch = (resource, model) => {\n  return axios.patch(resource, model).then(handleResponse).catch(handleError);\n};\n\n/** @param {string} resource */\n/** @param {string} id */\nconst remove = (resource, id) => {\n  return axios.delete(resource, id).then(handleResponse).catch(handleError);\n};\n\nconst exportedObject = {\n  get,\n  post,\n  put,\n  patch,\n  remove\n};\n\nexport default exportedObject;\n"],"names":["options","autoClose","className","position","toast","toastSuccess","message","toastError","Object","freeze","LOGIN","CREATE_USER","CREATE_BUSINESS","PROFILE","USERS","LOCATION","id","MASTER_LOCATIONS","CREATE_LOCATION_BY_MASTER_ADMIN","MY_LOCATION","APPROVE_LOCATION","ADD_REVIEW","APPROVE_REVIEW","ADD_REPLY","APPROVE_REPLY","loginRequest","payload","api","e","Yup","shape","email","required","password","min","max","navigate","useNavigate","useMutation","mutate","login","onSuccess","data","storeAuthToken","accessToken","onError","error","loginState","useLogin","previousRoute","getPreviousRoute","formik","useFormik","initialValues","validationSchema","LoginSchema","onSubmit","removePreviousRoute","user","Role","height","width","alignItems","justifyContent","bg","p","flexDirection","py","px","base","sm","md","borderRadius","maxWidth","textStyle","fontWeight","mb","preventDefault","handleSubmit","style","spacing","variant","placeholder","type","value","values","onChange","handleChange","onBlur","handleBlur","isInvalid","touched","Boolean","errors","errorMsg","mode","isDisabled","isLoading","keys","length","href","instance","axios","baseURL","process","handleResponse","response","results","Promise","resolve","interceptors","request","use","config","token","getAuthToken","headers","hasOwnProperty","Authorization","Nprogress","status","removeAuthToken","reject","handleError","get","resource","then","catch","post","model","put","patch","remove"],"sourceRoot":""}