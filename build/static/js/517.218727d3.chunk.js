"use strict";(self.webpackChunktravex=self.webpackChunktravex||[]).push([[517],{3131:function(e,n,t){t.d(n,{_N:function(){return i},x9:function(){return o}});var r=t(9085),a={autoClose:2e3,className:"",position:r.Am.POSITION.TOP_RIGHT},o=function(e){r.Am.success(e,a)},i=function(e){r.Am.error(e,a)}},126:function(e,n){n.Z=Object.freeze({LOGIN:"/api/login",CREATE_USER:"/api/register",CREATE_BUSINESS:"/api/business/register",PROFILE:"/api/profile",USERS:"/api/masteradmin/users",LOCATION:function(e){return"/api/locations/".concat(e)},MASTER_LOCATIONS:"/api/admin/locations",CREATE_LOCATION_BY_MASTER_ADMIN:"/api/masteradmin/locations",MY_LOCATION:"/api/profile/locations",APPROVE_LOCATION:function(e){return"/api/locations/".concat(e,"/approve")},ADD_REVIEW:function(e){return"/api/locations/".concat(e,"/reviews")},APPROVE_REVIEW:function(e){return"/api/locations/".concat(e,"/reviews/approveReview")},ADD_REPLY:function(e){return"/api/locations/".concat(e,"/reviews/addComment")},APPROVE_REPLY:function(e){return"/api/locations/".concat(e,"/comments/approveReply")}})},2039:function(e,n,t){t.d(n,{U:function(){return d},q:function(){return c}});var r=t(4165),a=t(5861),o=t(8669),i=t(126),s=t(2917),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get(i.Z.PROFILE);case 2:return n=e.sent,t=n.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.a)(["profile"],u,e)},l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get(i.Z.USERS);case 2:return n=e.sent,t=n.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.a)(["users"],l,e)}},3517:function(e,n,t){t.r(n),t.d(n,{default:function(){return ue}});var r=t(1413),a=t(9439),o=t(2791),i=t(4942),s=t(4925),u=t(6992),d=t(4591),l=["onChange","value","defaultValue","name","isDisabled","isFocusable","isNative"];function c(e){return e&&(0,u.Kn)(e)&&(0,u.Kn)(e.target)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onChange,t=e.value,u=e.defaultValue,p=e.name,h=e.isDisabled,v=e.isFocusable,f=e.isNative,m=(0,s.Z)(e,l),g=(0,o.useState)(u||""),b=(0,a.Z)(g,2),x=b[0],y=b[1],Z="undefined"!==typeof t,w=Z?t:x,C=(0,o.useRef)(null),P=(0,o.useCallback)((function(){var e=C.current;if(e){var n="input:not(:disabled):checked",t=e.querySelector(n);if(t)t.focus();else{n="input:not(:disabled)";var r=e.querySelector(n);null==r||r.focus()}}}),[]),k=(0,o.useId)(),S="radio-".concat(k),E=p||S,R=(0,o.useCallback)((function(e){var t=c(e)?e.target.value:e;Z||y(t),null==n||n(String(t))}),[n,Z]),I=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,r.Z)((0,r.Z)({},e),{},{ref:(0,d.lq)(n,C),role:"radiogroup"})}),[]),L=(0,o.useCallback)((function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=f?"checked":"isChecked";return(0,r.Z)((0,r.Z)({},n),{},(e={ref:t,name:E},(0,i.Z)(e,a,null!=w?n.value===w:void 0),(0,i.Z)(e,"onChange",(function(e){R(e)})),(0,i.Z)(e,"data-radiogroup",!0),e))}),[f,E,R,w]);return{getRootProps:I,getRadioProps:L,name:E,ref:C,focus:P,setValue:y,value:w,onChange:R,isDisabled:h,isFocusable:v,htmlProps:m}}var h=t(4087),v=t(896),f=t(176),m=t(6146),g=t(2893),b=t(7908),x=t(7872),y=t(9745),Z=t(9886),w=t(184),C=["colorScheme","size","variant","children","className","isDisabled","isFocusable"],P=(0,Z.k)({name:"RadioGroupContext",strict:!1}),k=(0,a.Z)(P,2),S=k[0],E=k[1];(0,x.G)((function(e,n){var t=e.colorScheme,a=e.size,i=e.variant,d=e.children,l=e.className,c=e.isDisabled,h=e.isFocusable,v=p((0,s.Z)(e,C)),f=v.value,m=v.onChange,g=v.getRootProps,b=v.name,x=v.htmlProps,Z=(0,o.useMemo)((function(){return{name:b,size:a,onChange:m,colorScheme:t,value:f,variant:i,isDisabled:c,isFocusable:h}}),[b,a,m,t,f,i,c,h]);return(0,w.jsx)(S,{value:Z,children:(0,w.jsx)(y.m.div,(0,r.Z)((0,r.Z)({},g(x,n)),{},{className:(0,u.cx)("chakra-radio-group",l),children:d}))})})).displayName="RadioGroup";var R=t(2701),I=!1,L=null,j=!1,A=!1,T=new Set;function B(e,n){T.forEach((function(t){return t(e,n)}))}var D="undefined"!==typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);function O(e){var n;j=!0,(n=e).metaKey||!D&&n.altKey||n.ctrlKey||"Control"===n.key||"Shift"===n.key||"Meta"===n.key||(L="keyboard",B("keyboard",e))}function M(e){if(L="pointer","mousedown"===e.type||"pointerdown"===e.type){j=!0;var n=e.composedPath?e.composedPath()[0]:e.target,t=!1;try{t=n.matches(":focus-visible")}catch(r){}if(t)return;B("pointer",e)}}function N(e){var n;(0===(n=e).mozInputSource&&n.isTrusted||0===n.detail&&!n.pointerType)&&(j=!0,L="virtual")}function _(e){e.target!==window&&e.target!==document&&(j||A||(L="virtual",B("virtual",e)),j=!1,A=!1)}function q(){j=!1,A=!0}function F(){return"pointer"!==L}function U(){if("undefined"!==typeof window&&!I){var e=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){j=!0;for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];e.apply(this,t)},document.addEventListener("keydown",O,!0),document.addEventListener("keyup",O,!0),document.addEventListener("click",N,!0),window.addEventListener("focus",_,!0),window.addEventListener("blur",q,!1),"undefined"!==typeof PointerEvent?(document.addEventListener("pointerdown",M,!0),document.addEventListener("pointermove",M,!0),document.addEventListener("pointerup",M,!0)):(document.addEventListener("mousedown",M,!0),document.addEventListener("mousemove",M,!0),document.addEventListener("mouseup",M,!0)),I=!0}}function z(e){U(),e(F());var n=function(){return e(F())};return T.add(n),function(){T.delete(n)}}var V=["defaultChecked","isChecked","isFocusable","isDisabled","isReadOnly","isRequired","onChange","isInvalid","name","value","id","data-radiogroup","aria-describedby"],K={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function W(e){e.preventDefault(),e.stopPropagation()}function G(e){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultChecked,t=e.isChecked,i=e.isFocusable,d=e.isDisabled,l=e.isReadOnly,c=e.isRequired,p=e.onChange,h=e.isInvalid,v=e.name,f=e.value,m=e.id,g=e["data-radiogroup"],b=e["aria-describedby"],x=(0,s.Z)(e,V),y="radio-".concat((0,o.useId)()),Z=(0,R.NJ)(),w=!!E()||!!g,C=Z&&!w?Z.id:y;C=null!=m?m:C;var P=null!=d?d:null==Z?void 0:Z.isDisabled,k=null!=l?l:null==Z?void 0:Z.isReadOnly,S=null!=c?c:null==Z?void 0:Z.isRequired,I=null!=h?h:null==Z?void 0:Z.isInvalid,L=(0,o.useState)(!1),j=(0,a.Z)(L,2),A=j[0],T=j[1],B=(0,o.useState)(!1),D=(0,a.Z)(B,2),O=D[0],M=D[1],N=(0,o.useState)(!1),_=(0,a.Z)(N,2),q=_[0],F=_[1],U=(0,o.useState)(!1),G=(0,a.Z)(U,2),H=G[0],Y=G[1],Q=(0,o.useState)(Boolean(n)),J=(0,a.Z)(Q,2),X=J[0],$=J[1],ee="undefined"!==typeof t,ne=ee?t:X;(0,o.useEffect)((function(){return z(T)}),[]);var te=(0,o.useCallback)((function(e){k||P?e.preventDefault():(ee||$(e.target.checked),null==p||p(e))}),[ee,P,k,p]),re=(0,o.useCallback)((function(e){" "===e.key&&Y(!0)}),[Y]),ae=(0,o.useCallback)((function(e){" "===e.key&&Y(!1)}),[Y]),oe=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,r.Z)((0,r.Z)({},e),{},{ref:n,"data-active":(0,u.PB)(H),"data-hover":(0,u.PB)(q),"data-disabled":(0,u.PB)(P),"data-invalid":(0,u.PB)(I),"data-checked":(0,u.PB)(ne),"data-focus":(0,u.PB)(O),"data-focus-visible":(0,u.PB)(O&&A),"data-readonly":(0,u.PB)(k),"aria-hidden":!0,onMouseDown:(0,u.v0)(e.onMouseDown,(function(){return Y(!0)})),onMouseUp:(0,u.v0)(e.onMouseUp,(function(){return Y(!1)})),onMouseEnter:(0,u.v0)(e.onMouseEnter,(function(){return F(!0)})),onMouseLeave:(0,u.v0)(e.onMouseLeave,(function(){return F(!1)}))})}),[H,q,P,I,ne,O,k,A]),ie=null!=Z?Z:{},se=ie.onFocus,ue=ie.onBlur,de=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=P&&!i;return(0,r.Z)((0,r.Z)({},e),{},{id:C,ref:n,type:"radio",name:v,value:f,onChange:(0,u.v0)(e.onChange,te),onBlur:(0,u.v0)(ue,e.onBlur,(function(){return M(!1)})),onFocus:(0,u.v0)(se,e.onFocus,(function(){return M(!0)})),onKeyDown:(0,u.v0)(e.onKeyDown,re),onKeyUp:(0,u.v0)(e.onKeyUp,ae),checked:ne,disabled:t,readOnly:k,required:S,"aria-invalid":(0,u.Qm)(I),"aria-disabled":(0,u.Qm)(t),"aria-required":(0,u.Qm)(S),"data-readonly":(0,u.PB)(k),"aria-describedby":b,style:K})}),[P,i,C,v,f,te,ue,se,re,ae,ne,k,S,I,b]),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,r.Z)((0,r.Z)({},e),{},{ref:n,onMouseDown:(0,u.v0)(e.onMouseDown,W),onTouchStart:(0,u.v0)(e.onTouchStart,W),"data-disabled":(0,u.PB)(P),"data-checked":(0,u.PB)(ne),"data-invalid":(0,u.PB)(I)})},ce=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,r.Z)((0,r.Z)({},e),{},{ref:n,"data-disabled":(0,u.PB)(P),"data-checked":(0,u.PB)(ne),"data-invalid":(0,u.PB)(I)})};return{state:{isInvalid:I,isFocused:O,isChecked:ne,isActive:H,isHovered:q,isDisabled:P,isReadOnly:k,isRequired:S},getCheckboxProps:oe,getInputProps:de,getLabelProps:le,getRootProps:ce,htmlProps:x}}(e),t=n.getInputProps,i=n.getCheckboxProps,d=t(),l=i();return(0,w.jsxs)(h.xu,{as:"label",children:[(0,w.jsx)("input",(0,r.Z)({},d)),(0,w.jsx)(h.xu,(0,r.Z)((0,r.Z)({},l),{},{cursor:"pointer",borderWidth:"1px",borderRadius:"md",boxShadow:"md",color:"gray.400",_checked:{bg:"gray.400",color:"white",borderColor:"gray.400"},_focus:{boxShadow:"none"},fontSize:{base:"14px",sm:"16px"},px:{base:3,sm:5},py:{base:2,sm:3},children:e.children}))]})}var H=t(9352),Y=t(2039),Q=t(7689),J=t(1087),X=t(4373),$=t(5705),ee=t(1724),ne=ee.Ry().shape({name:ee.Z_().label("Name").required("Name is required").min(2,"Must have at least 2 characters"),address:ee.Z_().label("Address").required("Address is required").min(2,"Must have at least 2 characters"),description:ee.Z_().label("Description").required("Description is required").min(20,"Must have at least 20 characters")}),te=t(3418),re=t(8669),ae=t(126),oe=t(3131),ie=["mutate"];var se=["bar","club","park","restaurant"];function ue(){var e=(0,Q.s0)(),n=(0,J.lr)(),t=(0,a.Z)(n,1)[0],i=(0,Y.U)(),u=i.data,d=i.isLoading,l=function(e){var n="master_admin"===e?ae.Z.CREATE_LOCATION_BY_MASTER_ADMIN:ae.Z.LOCATION(""),t=(0,te.D)((function(e){return re.Z.post(n,e,{headers:{"Content-Type":"multipart/form-data"}})})),r=t.mutate;return{createListing:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};r(e,{onSuccess:function(e){(0,oe.x9)(e.message),n(e)},onError:function(e){(0,oe._N)(e.message)}})},createListingState:(0,s.Z)(t,ie)}}(null===u||void 0===u?void 0:u.Role),c=l.createListing,x=l.createListingState,y=(0,o.useState)({locationType:"bar",image:null}),Z=(0,a.Z)(y,2),C=Z[0],P=Z[1],k=p({name:"locationType",defaultValue:"bar",onChange:function(e){return P((function(n){return(0,r.Z)((0,r.Z)({},n),{},{locationType:e})}))}}),S=k.getRootProps,E=k.getRadioProps,R=S(),I=(0,$.TA)({initialValues:{name:"",address:"",description:""},validationSchema:ne,onSubmit:function(n){var a=(0,r.Z)((0,r.Z)((0,r.Z)({},n),C),{},{userId:t.get("userId")});(new FormData).append("listingPayload",a),c(a,(function(){return e("/my-listings")}))}});return d?(0,w.jsx)(b.aN,{height:"80vh"}):"customer"===(null===u||void 0===u?void 0:u.Role)?(0,w.jsx)(b.ub,{bg:"white",height:"400px",heading:"You do not have enough permission to access this screen. Click the button below to go back",btn:(0,w.jsx)(b.zx,{mode:"secondary",variant:"solid",size:"lg",onClick:function(){return e(-1)},children:"Go Back"})}):(0,w.jsxs)(h.xu,{children:[(0,w.jsx)(de,{user:u}),(0,w.jsx)(v.M,{children:(0,w.jsx)(f.k,{flexDirection:"column",alignItems:"flex-start",justifyContent:"center",width:"80%",position:"absolute",top:{base:"290px",md:"320px"},bg:"white",borderRadius:"10px",border:"1px solid ".concat(H.Z.gray[200]),py:{base:"20px",md:"60px"},px:{base:"24px",md:"80px",lg:"120px"},children:(0,w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),I.handleSubmit(e)},id:"createListing",style:{width:"100%"},children:[(0,w.jsxs)(m.g,{spacing:"24px",width:"100%",children:[(0,w.jsx)(b.II,{label:"Name",id:"name",variant:"outline",placeholder:"Enter the title of your listing here...",value:I.values.name,onChange:I.handleChange,onBlur:I.handleBlur,isInvalid:I.touched.name&&Boolean(I.errors.name),errorMsg:I.errors.name}),(0,w.jsx)(b.II,{label:"Address",id:"address",variant:"outline",placeholder:"Enter the listing address here...",value:I.values.address,onChange:I.handleChange,onBlur:I.handleBlur,isInvalid:I.touched.address&&Boolean(I.errors.address),errorMsg:I.errors.address}),(0,w.jsx)(b.gx,{label:"Description",id:"description",placeholder:"Explain what your listing does, the more easy it is to comprehend the higher conversion you will get.",minH:"150px",value:I.values.description,onChange:I.handleChange,onBlur:I.handleBlur,isInvalid:I.touched.description&&Boolean(I.errors.description),errorMsg:I.errors.description}),(0,w.jsxs)(h.xu,{width:"100%",children:[(0,w.jsx)(b.ZT,{textStyle:"13",color:"gray.400",mb:"8px",children:"Listing Category"}),(0,w.jsx)(b.ZT,{textStyle:"14",color:"gray.300",mb:"22px",children:"Place your listing in the appropriate category to speed up ease of location and to make life easier for your potential customers."}),(0,w.jsx)(g.U,(0,r.Z)((0,r.Z)({flexWrap:"wrap",spacing:{base:"4px",sm:"10px"}},R),{},{children:se.map((function(e){var n=E({value:e});return(0,w.jsx)(G,(0,r.Z)((0,r.Z)({},n),{},{children:e}),e)}))}))]}),(0,w.jsxs)(h.xu,{width:"100%",children:[(0,w.jsx)(b.ZT,{textStyle:"13",color:"gray.400",mb:"8px",children:"Upload Cover Photo"}),(0,w.jsx)(b.ZT,{textStyle:"14",color:"gray.300",mb:"22px",children:"Add an image for easy identification, make sure the image is high quality and very visible. This makes your listing more attractive."}),(0,w.jsx)(b.II,{id:"coverPhoto",type:"file",accept:["image/*"],onChange:function(e){var n=e.target.files[0];P((function(e){return(0,r.Z)((0,r.Z)({},e),{},{image:n})}))}})]})]}),(0,w.jsx)(v.M,{children:(0,w.jsx)(b.zx,{mode:"secondary",variant:"solid",size:"lg",width:"180px",mt:"60px",type:"submit",rightIcon:(0,w.jsx)(X.fNt,{fontSize:"24px"}),isDisabled:x.isLoading||0!==Object.keys(I.errors).length||!C.image,isLoading:x.isLoading,children:"Add Listing"})})]})})})]})}var de=function(e){var n,t=e.user;return(0,w.jsxs)(f.k,{alignItems:"center",justifyContent:"center",flexDirection:"column",py:"60px",px:"40px",bg:"gray.400",children:[(0,w.jsxs)(b.ZT,{textStyle:"6",color:"white",textAlign:"center",fontWeight:700,mb:"16px",children:[(null===t||void 0===t||null===(n=t.Locations)||void 0===n?void 0:n.length)>0?"Welcome Back":"Hi",", ",t?null===t||void 0===t?void 0:t.First_name:""]}),(0,w.jsx)(b.ZT,{textStyle:"9",color:"white",textAlign:"center",fontWeight:400,children:"Get started by creating a listing"})]})}},8669:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(3263),a=t(691),o=t.n(a),i=t(1986),s=r.Z.create({baseURL:"https://www.travexapitest.co.uk"});function u(e){return e.results?Promise.resolve(e.results):e.data?Promise.resolve(e.data):Promise.resolve(e)}s.interceptors.request.use((function(e){var n=(0,i.bW)();return n&&!e.headers.hasOwnProperty("Authorization")&&(e.headers.Authorization="Bearer ".concat(n)),e})),s.interceptors.request.use((function(e){return o().start(),e})),s.interceptors.response.use((function(e){return o().done(),e}),(function(e){if(o().done(),e.response&&e.response.data&&e.response.data.message)if(401===e.response.status)e={response:{data:e.response.data}},(0,i.H6)();else if(404===e.response.status)e={response:{data:e.response.data}};else{if(500!==e.response.status)return Promise.reject(e);e={response:{data:{message:"Ooops! an error occurred"}}}}else e={response:{data:{message:"Unable to complete request"}}};throw e}));function d(e){return e.data?Promise.reject(e.data):e.response.data?Promise.reject(e.response.data):Promise.reject(e)}var l={get:function(e){return s.get(e).then(u).catch(d)},post:function(e,n,t){return s.post(e,n,t).then(u).catch(d)},put:function(e,n){return s.put(e,n).then(u).catch(d)},patch:function(e,n){return s.patch(e,n).then(u).catch(d)},remove:function(e,n){return s.delete(e,n).then(u).catch(d)}}}}]);
//# sourceMappingURL=517.218727d3.chunk.js.map